<?php
require('config.php');
require("GroovesharkAPI-PHP/gsAPI.php");
session_start();
$gsapi = new gsAPI($api_key, $api_secret);
if (isset($_SESSION['gsSession'])) {
    $gsapi->setSession($_SESSION['gsSession']);
} else {
    $_SESSION['gsSession'] = $gsapi->startSession();
}
$gsapi->getCountry($_SERVER['REMOTE_ADDR']);

require("GroovesharkAPI-PHP/gsSearch.php");

$gsSearch = new gsSearch();
$gsSearch->setTitle($_POST['title']);

$results = $gsSearch->songSearchResults($max=10);

$results_str = <<<EOD
{"header":{"hostname":"RHL082"},"result":{"songs":[{"SongID":53654,"SongName":"West Coast","ArtistID":8240,"ArtistName":"Coconut Records","AlbumID":141828,"AlbumName":"Nighttiming","CoverArtFilename":"141828.jpg","Popularity":1316525044,"IsLowBitrateAvailable":true,"IsVerified":true,"Flags":0},{"SongID":9685409,"SongName":"West Coast Friendship","ArtistID":538058,"ArtistName":"Owl City","AlbumID":1591230,"AlbumName":"Maybe I'm Dreaming","CoverArtFilename":"1591230.jpg","Popularity":1316504019,"IsLowBitrateAvailable":true,"IsVerified":false,"Flags":0},{"SongID":26152408,"SongName":"Boyfriend","ArtistID":1228066,"ArtistName":"Best Coast","AlbumID":4625030,"AlbumName":"Crazy for You","CoverArtFilename":"4625030.jpg","Popularity":1316203941,"IsLowBitrateAvailable":true,"IsVerified":true,"Flags":0},{"SongID":33107456,"SongName":"Not Just You","ArtistID":1388225,"ArtistName":"Cody Simpson","AlbumID":6976604,"AlbumName":"Coast to Coast","CoverArtFilename":"","Popularity":1316203335,"IsLowBitrateAvailable":true,"IsVerified":true,"Flags":0},{"SongID":27883473,"SongName":"Against All Odds (feat. Westlife)","ArtistID":404173,"ArtistName":"Westlife","AlbumID":1114207,"AlbumName":"Coast to Coast","CoverArtFilename":"1114207.jpg","Popularity":1316203213,"IsLowBitrateAvailable":true,"IsVerified":true,"Flags":0},{"SongID":22962042,"SongName":"Coast of Carolina","ArtistID":436,"ArtistName":"Jimmy Buffett","AlbumID":1784907,"AlbumName":"License to Chill","CoverArtFilename":"1784907.png","Popularity":1316203042,"IsLowBitrateAvailable":true,"IsVerified":true,"Flags":0},{"SongID":14593763,"SongName":"Far Away Coast","ArtistID":401878,"ArtistName":"Dropkick Murphys","AlbumID":107310,"AlbumName":"Do or Die","CoverArtFilename":"107310.jpg","Popularity":1316202844,"IsLowBitrateAvailable":true,"IsVerified":true,"Flags":0},{"SongID":33107484,"SongName":"Angel","ArtistID":1388225,"ArtistName":"Cody Simpson","AlbumID":6976604,"AlbumName":"Coast to Coast","CoverArtFilename":"","Popularity":1316202727,"IsLowBitrateAvailable":true,"IsVerified":true,"Flags":0},{"SongID":23146479,"SongName":"Islands on the Coast","ArtistID":401620,"ArtistName":"Band of Horses","AlbumID":501216,"AlbumName":"Cease to Begin","CoverArtFilename":"501216.jpg","Popularity":1316202654,"IsLowBitrateAvailable":true,"IsVerified":true,"Flags":0},{"SongID":4898006,"SongName":"Acadian Coast","ArtistID":6594,"ArtistName":"Soltero","AlbumID":136893,"AlbumName":"Hell Train","CoverArtFilename":"136893.jpg","Popularity":1316202548,"IsLowBitrateAvailable":true,"IsVerified":true,"Flags":0},{"SongID":26329238,"SongName":"When I'm With You","ArtistID":1228066,"ArtistName":"Best Coast","AlbumID":4625030,"AlbumName":"Crazy for You","CoverArtFilename":"4625030.jpg","Popularity":1316202393,"IsLowBitrateAvailable":true,"IsVerified":false,"Flags":0},{"SongID":26329205,"SongName":"Crazy for You","ArtistID":1228066,"ArtistName":"Best Coast","AlbumID":4625030,"AlbumName":"Crazy for You","CoverArtFilename":"4625030.jpg","Popularity":1316202197,"IsLowBitrateAvailable":true,"IsVerified":true,"Flags":0},{"SongID":33769460,"SongName":"No Sleep Instrumental","ArtistID":279340,"ArtistName":"Wiz Khalifa","AlbumID":7260645,"AlbumName":"Coast 2 Coast Instrumentals Vol 27","CoverArtFilename":"","Popularity":1316302166,"IsLowBitrateAvailable":false,"IsVerified":false,"Flags":0},{"SongID":27855168,"SongName":"Coast 2 Coast","ArtistID":1341165,"ArtistName":"Sam Adams","AlbumID":4093156,"AlbumName":"Boston's Boy","CoverArtFilename":"4093156.jpg","Popularity":1316202057,"IsLowBitrateAvailable":true,"IsVerified":true,"Flags":2},{"SongID":23455762,"SongName":"Take It Easy","ArtistID":1228067,"ArtistName":"Surfer Blood","AlbumID":3603551,"AlbumName":"Astro Coast","CoverArtFilename":"3603551.jpg","Popularity":1316202014,"IsLowBitrateAvailable":true,"IsVerified":true,"Flags":0},{"SongID":33107402,"SongName":"Good As It Gets","ArtistID":1388225,"ArtistName":"Cody Simpson","AlbumID":6976604,"AlbumName":"Coast to Coast","CoverArtFilename":"","Popularity":1316201985,"IsLowBitrateAvailable":true,"IsVerified":true,"Flags":0},{"SongID":31665282,"SongName":"Pacific Coast Highway","ArtistID":115849,"ArtistName":"Kavinsky","AlbumID":4353620,"AlbumName":"Nightcall","CoverArtFilename":"","Popularity":1316201791,"IsLowBitrateAvailable":true,"IsVerified":true,"Flags":0},{"SongID":23452949,"SongName":"Floating Vibes","ArtistID":1228067,"ArtistName":"Surfer Blood","AlbumID":3603551,"AlbumName":"Astro Coast","CoverArtFilename":"3603551.jpg","Popularity":1316201726,"IsLowBitrateAvailable":true,"IsVerified":true,"Flags":0},{"SongID":947842,"SongName":"I Want Love","ArtistID":8,"ArtistName":"Elton John","AlbumID":1594519,"AlbumName":"Songs From the West Coast","CoverArtFilename":"1594519.jpg","Popularity":1317101699,"IsLowBitrateAvailable":true,"IsVerified":true,"Flags":0},{"SongID":31312590,"SongName":"Pacific Coast Eyes","ArtistID":155893,"ArtistName":"Graham Colton","AlbumID":6469665,"AlbumName":"Pacific Coast Eyes","CoverArtFilename":"6469665.jpg","Popularity":1316301634,"IsLowBitrateAvailable":true,"IsVerified":true,"Flags":0},{"SongID":32364513,"SongName":"When You're Looking Like That","ArtistID":404173,"ArtistName":"Westlife","AlbumID":1114207,"AlbumName":"Coast to Coast","CoverArtFilename":"1114207.jpg","Popularity":1316301601,"IsLowBitrateAvailable":true,"IsVerified":true,"Flags":0},{"SongID":24557967,"SongName":"Our Faces Split the Coast in Half","ArtistID":32,"ArtistName":"Broken Social Scene","AlbumID":125570,"AlbumName":"Broken Social Scene","CoverArtFilename":"125570.png","Popularity":1316201495,"IsLowBitrateAvailable":true,"IsVerified":true,"Flags":0},{"SongID":23455793,"SongName":"Catholic Pagans","ArtistID":1228067,"ArtistName":"Surfer Blood","AlbumID":3603551,"AlbumName":"Astro Coast","CoverArtFilename":"3603551.jpg","Popularity":1316201385,"IsLowBitrateAvailable":true,"IsVerified":true,"Flags":0},{"SongID":23455802,"SongName":"Swim","ArtistID":1228067,"ArtistName":"Surfer Blood","AlbumID":3603551,"AlbumName":"Astro Coast","CoverArtFilename":"3603551.jpg","Popularity":1316201348,"IsLowBitrateAvailable":true,"IsVerified":true,"Flags":0},{"SongID":26329215,"SongName":"Our Deal","ArtistID":1228066,"ArtistName":"Best Coast","AlbumID":4625030,"AlbumName":"Crazy for You","CoverArtFilename":"4625030.jpg","Popularity":1316201303,"IsLowBitrateAvailable":true,"IsVerified":true,"Flags":0},{"SongID":23455759,"SongName":"Slow Jabroni","ArtistID":1228067,"ArtistName":"Surfer Blood","AlbumID":3603551,"AlbumName":"Astro Coast","CoverArtFilename":"3603551.jpg","Popularity":1316201197,"IsLowBitrateAvailable":true,"IsVerified":true,"Flags":0},{"SongID":23455823,"SongName":"Anchorage","ArtistID":1228067,"ArtistName":"Surfer Blood","AlbumID":3603551,"AlbumName":"Astro Coast","CoverArtFilename":"3603551.jpg","Popularity":1316201184,"IsLowBitrateAvailable":true,"IsVerified":true,"Flags":0},{"SongID":33107419,"SongName":"Crazy But True","ArtistID":1388225,"ArtistName":"Cody Simpson","AlbumID":6976604,"AlbumName":"Coast to Coast","CoverArtFilename":"","Popularity":1316301171,"IsLowBitrateAvailable":true,"IsVerified":true,"Flags":0},{"SongID":25627904,"SongName":"West Coast Blues","ArtistID":29118,"ArtistName":"Wes Montgomery","AlbumID":244016,"AlbumName":"The Incredible Jazz Guitar of Wes Montgomery","CoverArtFilename":"244016.jpg","Popularity":1316201041,"IsLowBitrateAvailable":true,"IsVerified":true,"Flags":0},{"SongID":26329230,"SongName":"Happy","ArtistID":1228066,"ArtistName":"Best Coast","AlbumID":4625030,"AlbumName":"Crazy for You","CoverArtFilename":"4625030.jpg","Popularity":1317101002,"IsLowBitrateAvailable":true,"IsVerified":true,"Flags":0},{"SongID":33103989,"SongName":"My Girl","ArtistID":1589947,"ArtistName":"Mindless Behavior","AlbumID":7030220,"AlbumName":"Coast 2 Coast Instrumentals Vol 24","CoverArtFilename":"","Popularity":1316200978,"IsLowBitrateAvailable":true,"IsVerified":false,"Flags":0},{"SongID":26305318,"SongName":"Summer Mood","ArtistID":1228066,"ArtistName":"Best Coast","AlbumID":4625030,"AlbumName":"Crazy for You","CoverArtFilename":"4625030.jpg","Popularity":1316200957,"IsLowBitrateAvailable":true,"IsVerified":true,"Flags":0},{"SongID":26329208,"SongName":"The End","ArtistID":1228066,"ArtistName":"Best Coast","AlbumID":4625030,"AlbumName":"Crazy for You","CoverArtFilename":"4625030.jpg","Popularity":1316200937,"IsLowBitrateAvailable":true,"IsVerified":true,"Flags":0},{"SongID":28750806,"SongName":"Sun Was High (So Was I)","ArtistID":1228066,"ArtistName":"Best Coast","AlbumID":4914705,"AlbumName":"Sun Was High (So Was I)","CoverArtFilename":"4914705.jpg","Popularity":1316200886,"IsLowBitrateAvailable":true,"IsVerified":true,"Flags":0},{"SongID":27829199,"SongName":"Hesitation","ArtistID":1637579,"ArtistName":"Koan Sound & Asa","AlbumID":5267996,"AlbumName":"Coast To Coast","CoverArtFilename":"","Popularity":1316200872,"IsLowBitrateAvailable":true,"IsVerified":false,"Flags":0},{"SongID":26329227,"SongName":"Honey","ArtistID":1228066,"ArtistName":"Best Coast","AlbumID":4625030,"AlbumName":"Crazy for You","CoverArtFilename":"4625030.jpg","Popularity":1317100795,"IsLowBitrateAvailable":true,"IsVerified":true,"Flags":0},{"SongID":26329220,"SongName":"When the Sun Don't Shine","ArtistID":1228066,"ArtistName":"Best Coast","AlbumID":4625030,"AlbumName":"Crazy for You","CoverArtFilename":"4625030.jpg","Popularity":1317100778,"IsLowBitrateAvailable":true,"IsVerified":true,"Flags":0},{"SongID":26329225,"SongName":"Bratty B","ArtistID":1228066,"ArtistName":"Best Coast","AlbumID":4625030,"AlbumName":"Crazy for You","CoverArtFilename":"4625030.jpg","Popularity":1316200776,"IsLowBitrateAvailable":true,"IsVerified":true,"Flags":0},{"SongID":26700705,"SongName":"Close Your Eyes","ArtistID":404173,"ArtistName":"Westlife","AlbumID":1114207,"AlbumName":"Coast to Coast","CoverArtFilename":"1114207.jpg","Popularity":1316200768,"IsLowBitrateAvailable":true,"IsVerified":true,"Flags":0},{"SongID":10741902,"SongName":"Far Away Coast (live)","ArtistID":401878,"ArtistName":"Dropkick Murphys","AlbumID":1323357,"AlbumName":"The Singles Collection, Volume 1: 1996-1997","CoverArtFilename":"1323357.jpg","Popularity":1316200764,"IsLowBitrateAvailable":true,"IsVerified":true,"Flags":0},{"SongID":26329219,"SongName":"I Want To","ArtistID":1228066,"ArtistName":"Best Coast","AlbumID":4625030,"AlbumName":"Crazy for You","CoverArtFilename":"4625030.jpg","Popularity":1316200727,"IsLowBitrateAvailable":true,"IsVerified":true,"Flags":0},{"SongID":33107470,"SongName":"All Day","ArtistID":1388225,"ArtistName":"Cody Simpson","AlbumID":6976604,"AlbumName":"Coast to Coast","CoverArtFilename":"","Popularity":1316200723,"IsLowBitrateAvailable":true,"IsVerified":true,"Flags":0},{"SongID":26434649,"SongName":"Already Taken","ArtistID":11083,"ArtistName":"Trey Songz","AlbumID":4726913,"AlbumName":"Coast 2 Coast Vol 123 (Hosted By DJ Kay Slay)","CoverArtFilename":"4726913.jpg","Popularity":1317100670,"IsLowBitrateAvailable":true,"IsVerified":false,"Flags":0},{"SongID":23455795,"SongName":"Neighbour Riffs","ArtistID":1228067,"ArtistName":"Surfer Blood","AlbumID":3603551,"AlbumName":"Astro Coast","CoverArtFilename":"3603551.jpg","Popularity":1316200650,"IsLowBitrateAvailable":true,"IsVerified":true,"Flags":0},{"SongID":26329212,"SongName":"Goodbye","ArtistID":1228066,"ArtistName":"Best Coast","AlbumID":4625030,"AlbumName":"Crazy for You","CoverArtFilename":"4625030.jpg","Popularity":1316200641,"IsLowBitrateAvailable":true,"IsVerified":true,"Flags":0},{"SongID":27109875,"SongName":"13. Extra Domus - Shiven C2C","ArtistID":1563043,"ArtistName":"Coast 2 Coast (Various)","AlbumID":4985610,"AlbumName":"Halftime Report (Hosted By DJ Khaled)","CoverArtFilename":"4985610.jpg","Popularity":1316200627,"IsLowBitrateAvailable":true,"IsVerified":false,"Flags":0},{"SongID":23455809,"SongName":"Twin Peaks","ArtistID":1228067,"ArtistName":"Surfer Blood","AlbumID":3603551,"AlbumName":"Astro Coast","CoverArtFilename":"3603551.jpg","Popularity":1316200606,"IsLowBitrateAvailable":true,"IsVerified":true,"Flags":0},{"SongID":25396544,"SongName":"Pacific Coast Highway (Jackson remix)","ArtistID":115849,"ArtistName":"Kavinsky","AlbumID":4353620,"AlbumName":"Nightcall","CoverArtFilename":"","Popularity":1316200572,"IsLowBitrateAvailable":true,"IsVerified":true,"Flags":0},{"SongID":4784585,"SongName":"The Under Assistant West Coast Promotion Man","ArtistID":2446,"ArtistName":"The Rolling Stones","AlbumID":673135,"AlbumName":"Singles Collection: The London Years","CoverArtFilename":"673135.png","Popularity":1317000493,"IsLowBitrateAvailable":true,"IsVerified":true,"Flags":0},{"SongID":1239465,"SongName":"Coast Off","ArtistID":95199,"ArtistName":"Helios","AlbumID":393027,"AlbumName":"Eingya","CoverArtFilename":"393027.jpg","Popularity":1316200471,"IsLowBitrateAvailable":true,"IsVerified":false,"Flags":0}]}}
EOD;

$results = json_decode($results_str, true);

$html_result = array('options' => array(), 'ids' => array());

// print_r($results['result']['songs']);

foreach ($results['result']['songs'] as $i => $song) {
    array_push($html_result['options'], $song['SongName']);
    array_push($html_result['ids'], $song['SongID']);
}


echo json_encode($html_result);

?>